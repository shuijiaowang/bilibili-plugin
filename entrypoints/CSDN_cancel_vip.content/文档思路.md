
### 创作中心地址：https://mp.csdn.net/mp_blog/manage/article?spm=1011.2419.3001.10336
### 访问文章地址：https://blog.csdn.net/csdnnews/article/details/157398808?spm=1000.2115.3001.10524
### 我现在需要写一个浏览器插件工具，content.js,使用的是wtx
### 给你示例的一个bilibili的插件。改写。

### 首先得知道那些文件被设为了vip
直接请求接口
```
请求 URL
https://bizapi.csdn.net/blog/phoenix/console/v1/article/list?page=2&status=all_v3&pageSize=20
请求方法
GET
状态代码
200 OK
远程地址
127.0.0.1:10808
引用站点策略
strict-origin-when-cross-origin
:authority
bizapi.csdn.net
:method
GET
:path
/blog/phoenix/console/v1/article/list?page=2&status=all_v3&pageSize=20
:scheme
https
accept
application/json, text/plain, */*
accept-encoding
gzip, deflate, br, zstd
accept-language
zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6
cache-control
no-cache
cookie
uuid_tt_dd=10_18957925680-1742884518315-240189; fid=20_61456417498-1742884521259-300669; UN=weixin_55086920; c_dl_prid=1754291611909_640538; c_dl_rid=1758983721471_836165; c_dl_fref=https://blog.csdn.net/m0_50736744/article/details/143892562; c_dl_fpage=/download/m0_50736744/90014303; c_dl_um=distribute.pc_search_result.none-task-blog-2%7Eall%7Etop_positive%7Edefault-1-143892562-null-null.142%5Ev102%5Epc_search_result_base2; c_adb=1; loginbox_strategy=%7B%22taskId%22%3A317%2C%22abCheckTime%22%3A1769395243554%2C%22version%22%3A%22ExpA%22%2C%22nickName%22%3A%22%E6%9D%8E_ly%22%2C%22blog-threeH-dialog-expa%22%3A1769395243554%7D; UserName=weixin_55086920; UserInfo=161bdc9f67ae4269a03d53dac9d105f7; UserToken=161bdc9f67ae4269a03d53dac9d105f7; UserNick=%E6%9D%8E_ly; AU=13D; BT=1769398794164; p_uid=U010000; csdn_newcert_weixin_55086920=1; c_segment=13; dc_sid=16cbe72e209a8ed24b6e4b38b7c294c9; c_first_ref=cn.bing.com; creative_btn_mp=3; c_first_page=https%3A//blog.csdn.net/weixin_55086920/article/details/151013770; dc_session_id=10_1769729376886.965488; c_dsid=11_1769729765478.773136; c_page_id=default; log_Id_click=29; c-sidebar-collapse=0; c_ab_test=1; c_pref=https%3A//mp.csdn.net/; c_ref=https%3A//blog.csdn.net/; log_Id_pv=14; log_Id_view=380; dc_tos=t9nh4f
origin
https://mp.csdn.net
pragma
no-cache
priority
u=1, i
referer
https://mp.csdn.net/
sec-ch-ua
"Not)A;Brand";v="8", "Chromium";v="138", "Microsoft Edge";v="138"
sec-ch-ua-mobile
?0
sec-ch-ua-platform
"Windows"
sec-fetch-dest
empty
sec-fetch-mode
cors
sec-fetch-site
same-site
user-agent
Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0
x-ca-key
203803574
x-ca-nonce
2ae073d1-ace3-4df4-b40c-b0bcaaa9fff4
x-ca-signature
CryhwSv7k98TtgAEsHRsj2uw6E6VKqremo769/xQji8=
x-ca-signature-headers
x-ca-key,x-ca-nonce
```
响应结果
```
{
    "code": 200,
    "message": "success",
    "traceId": "9a82569d-16cd-464e-b1e8-b98275b3af18",
    "data": {
        "count": {
            "all": 48,
            "no_send_ml_audit": 23,
            "private": 4,
            "db_new_publish": 27,
            "original": 0,
            "request_new_publish": 27,
            "post_audit": 27,
            "all_v2": 31,
            "all_v3": 31,
            "deleted": 0,
            "enable": 27,
            "audit": 0,
            "draft": 17,
            "publish": 48
        },
        "list": [
            {
                "articleId": "150351913",
                "title": "第六章，gin框架中日志处理",
                "postTime": "2025-08-14 13:44:32",
                "viewCount": "0",
                "commentCount": "0",
                "commentAuth": "2",
                "isTop": "0",
                "status": "64",
                "username": "weixin_55086920",
                "type": "1",
                "isNeedFans": "0",
                "isNeedVip": "0",
                "isVipArticle": false,
                "editorType": 1,
                "isRecommend": false,
                "totalExposures": 0,
                "fansCount": 0,
                "diggCount": 0,
                "collectCount": 0,
                "coverImage": [],
                "voteId": 0,
                "isLock": false,
                "deprecated": false,
                "isShowFeedback": false,
                "complaintArticleId": 0,
                "complaintTitle": null,
                "complaintUrl": null,
                "complaintArticleStatus": null,
                "isComplaint": null,
                "complaintStatus": null,
                "complaintOrderNumber": null,
                "scheduledTime": 0,
                "downloadShareDataUrl": "https://blog.csdn.net/phoenix/web/v1/share/download-share-data?articleId=150351913",
                "plan": null,
                "qualityScore": 21,
                "qualitySpecification": "https://blog.csdn.net/u010280923/article/details/131449478"
            },
```
从中解析出"isNeedVip": "1",的文章，用数组存起来

### 修改为全部可见
```
请求 URL
https://bizapi.csdn.net/blog/phoenix/console/v2/article/set-visible-range
请求方法
POST
状态代码
200 OK
远程地址
127.0.0.1:10808
引用站点策略
strict-origin-when-cross-origin
:authority
bizapi.csdn.net
:method
POST
:path
/blog/phoenix/console/v2/article/set-visible-range
:scheme
https
accept
application/json, text/plain, */*
accept-encoding
gzip, deflate, br, zstd
accept-language
zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6
cache-control
no-cache
content-length
41
content-type
application/json;
cookie
uuid_tt_dd=10_18957925680-1742884518315-240189; fid=20_61456417498-1742884521259-300669; UN=weixin_55086920; c_dl_prid=1754291611909_640538; c_dl_rid=1758983721471_836165; c_dl_fref=https://blog.csdn.net/m0_50736744/article/details/143892562; c_dl_fpage=/download/m0_50736744/90014303; c_dl_um=distribute.pc_search_result.none-task-blog-2%7Eall%7Etop_positive%7Edefault-1-143892562-null-null.142%5Ev102%5Epc_search_result_base2; c_adb=1; loginbox_strategy=%7B%22taskId%22%3A317%2C%22abCheckTime%22%3A1769395243554%2C%22version%22%3A%22ExpA%22%2C%22nickName%22%3A%22%E6%9D%8E_ly%22%2C%22blog-threeH-dialog-expa%22%3A1769395243554%7D; UserName=weixin_55086920; UserInfo=161bdc9f67ae4269a03d53dac9d105f7; UserToken=161bdc9f67ae4269a03d53dac9d105f7; UserNick=%E6%9D%8E_ly; AU=13D; BT=1769398794164; p_uid=U010000; csdn_newcert_weixin_55086920=1; c_segment=13; dc_sid=16cbe72e209a8ed24b6e4b38b7c294c9; c_first_ref=cn.bing.com; creative_btn_mp=3; c_first_page=https%3A//blog.csdn.net/weixin_55086920/article/details/151013770; dc_session_id=10_1769729376886.965488; c_dsid=11_1769729765478.773136; c_page_id=default; c-sidebar-collapse=0; c_ab_test=1; c_pref=https%3A//mp.csdn.net/; c_ref=https%3A//blog.csdn.net/; log_Id_pv=14; log_Id_view=386; dc_tos=t9nh9r; log_Id_click=30
origin
https://mp.csdn.net
pragma
no-cache
priority
u=1, i
referer
https://mp.csdn.net/
sec-ch-ua
"Not)A;Brand";v="8", "Chromium";v="138", "Microsoft Edge";v="138"
sec-ch-ua-mobile
?0
sec-ch-ua-platform
"Windows"
sec-fetch-dest
empty
sec-fetch-mode
cors
sec-fetch-site
same-site
user-agent
Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0
x-ca-key
203803574
x-ca-nonce
a899e0de-e2fa-494f-9c26-bcdbea151acf
x-ca-signature
u0FVLabYnOD/eQKfrYzWqgCK+XC5C6mwZwuqiqCHCMI=
x-ca-signature-headers
x-ca-key,x-ca-nonce
```
body
```
{"articleId":"150340474","visible":"all"}
```
响应结果：
```
{
    "code": 200,
    "message": "success",
    "traceId": "a5f49b29-05e8-4762-93de-de14e4b040d3", //traceId是什么
    "data": true
}
```

//其他
```
["x-ca-timestamp", "x-ca-signature", "x-ca-signature-headers", "x-ca-key", "x-ca-nonce"].
```
```
 return t.headers["x-Ca-Timestamp"] = +new Date,
            t.headers["X-Ca-Key"] = c,
            t.headers["X-Ca-Nonce"] = Lt(),
            t.headers["X-Ca-Signature"] = Nt({
                method: s,
                url: a,
                accept: n,
                params: u,
                date: r,
                contentType: i,
                headers: t.headers,
                appSecret: f
            }),
            t.headers["X-Ca-Signature-Headers"] = (t => {
                const e = jt(t);
                let n;
                const r = Array.from(Object.keys(e)).sort();
                for (const t of r)
                    "x-ca-signature" !== t && (n = n ? n + "," + t : t);
                return n
            }
            )(t.headers),
            t
        }
```
```
请求 URL
https://bizapi.csdn.net/blog/phoenix/console/v1/article/list?page=2&status=all_v3&pageSize=20
请求方法
GET
状态代码
401 Unauthorized
远程地址
127.0.0.1:10808
引用站点策略
strict-origin-when-cross-origin
:authority
bizapi.csdn.net
:method
GET
:path
/blog/phoenix/console/v1/article/list?page=2&status=all_v3&pageSize=20
:scheme
https
accept
text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
accept-encoding
gzip, deflate, br, zstd
accept-language
zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6
cache-control
no-cache
cookie
uuid_tt_dd=10_18957925680-1742884518315-240189; fid=20_61456417498-1742884521259-300669; UN=weixin_55086920; c_dl_prid=1754291611909_640538; c_dl_rid=1758983721471_836165; c_dl_fref=https://blog.csdn.net/m0_50736744/article/details/143892562; c_dl_fpage=/download/m0_50736744/90014303; c_dl_um=distribute.pc_search_result.none-task-blog-2%7Eall%7Etop_positive%7Edefault-1-143892562-null-null.142%5Ev102%5Epc_search_result_base2; c_adb=1; loginbox_strategy=%7B%22taskId%22%3A317%2C%22abCheckTime%22%3A1769395243554%2C%22version%22%3A%22ExpA%22%2C%22nickName%22%3A%22%E6%9D%8E_ly%22%2C%22blog-threeH-dialog-expa%22%3A1769395243554%7D; UserName=weixin_55086920; UserInfo=161bdc9f67ae4269a03d53dac9d105f7; UserToken=161bdc9f67ae4269a03d53dac9d105f7; UserNick=%E6%9D%8E_ly; AU=13D; BT=1769398794164; p_uid=U010000; csdn_newcert_weixin_55086920=1; c_segment=13; dc_sid=16cbe72e209a8ed24b6e4b38b7c294c9; c_first_ref=cn.bing.com; creative_btn_mp=3; c_first_page=https%3A//blog.csdn.net/weixin_55086920/article/details/151013770; dc_session_id=10_1769729376886.965488; c_dsid=11_1769729765478.773136; c_page_id=default; c-sidebar-collapse=0; c_ab_test=1; c_pref=https%3A//mp.csdn.net/; c_ref=https%3A//blog.csdn.net/; log_Id_pv=14; log_Id_view=386; log_Id_click=30; dc_tos=t9nhjm
pragma
no-cache
priority
u=0, i
sec-ch-ua
"Not)A;Brand";v="8", "Chromium";v="138", "Microsoft Edge";v="138"
sec-ch-ua-mobile
?0
sec-ch-ua-platform
"Windows"
sec-fetch-dest
document
sec-fetch-mode
navigate
sec-fetch-site
cross-site
sec-fetch-user
?1
upgrade-insecure-requests
1
user-agent
Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0
```
```
Kong Error
X-Ca-Key is not exist.
```

网络资料
```
关于CSDN获取博客内容接口的x-ca-signature签名算法研究
前言
源码下载
不知道怎么就不通过了，这篇文章放出去几个月了，然后突然告诉我不行了，所以我打算换个平台（至少不能在一棵树吊死），垃圾审核
在这里插入图片描述
我最初想直接获取html博客，然后保存在本地，最后发布到别的博客平台，但是html直接爬取样式布局方面很不协调，所以我决定寻早我原始的markdown格式（我都是用markdown写的，而不是用富文本编辑器）

接口
简单调试得到 https://bizapi.csdn.net/blog-console-api/v3/editor/getArticle?id=109204774&model_type= 这个接口
内容：
在这里插入图片描述
返回内容是json, 其中 markdowncontent 字段就是 markdown原始数据，简单访问一下，发现访问失败，但是我在请求头和响应头中发现了门道：
在这里插入图片描述
很明显是请求头中少东西了，经过研究，请求头中应带

这几个东西，简单调试js发现x-ca-key 和 x-ca-signature-headers是一个常量，而通过名字也能明白，x-ca-nonce是每一次请求都需要从新生成的, 而 x-ca-signature 是一个经过x-ca-nonce和url结合的后加密后得到的，具体如何调试js我就不说了（比较复杂费时间），直接上代码

import hashlib
import hmac
from base64 import b64decode,b64encode
import random
import requests
import http.cookiejar as cookielib
from urllib.parse import urlparse

from get_all_article import get_all
import re

def createUuid():
    text = ""
    char_list = []
    for c in range(97,97+6):
        char_list.append(chr(c))
    for c in range(49,58):
        char_list.append(chr(c))
    for i in "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx":
        if i == "4":
            text += "4"
        elif i == "-":
            text += "-"
        else:
            text += random.choice(char_list)
    return text

def get_sign(uuid,url):
    s = urlparse(url)
    ekey = "9znpamsyl2c7cdrr9sas0le9vbc3r6ba".encode()
    to_enc = f"GET\n*/*\n\n\n\nx-ca-key:203803574\nx-ca-nonce:{uuid}\n{s.path+'?'+s.query[:-1]}".encode()
    sign = b64encode(hmac.new(ekey, to_enc, digestmod=hashlib.sha256).digest()).decode()
    return sign

def getArticleDetail(url):
    uuid = createUuid()
    sign = get_sign(uuid,url)
    headers = {}
    headers['x-ca-key'] = "203803574"
    headers['x-ca-nonce'] = uuid
    headers['x-ca-signature'] = sign
    headers['x-ca-signature-headers'] = "x-ca-key,x-ca-nonce"
    session = requests.session()

    session.cookies = cookielib.LWPCookieJar(filename='.cookie/csdn.txt')
    session.cookies.load()
    data = session.get(url,headers=headers).json()
    return data
这个代码主要看 createUuid() 和 get_sign() 俩函数，而他们分别对应的是请求头中的x-ca-nonce，x-ca-signature 字段，值得一提的是 createUuid()这个函数主要的格式正确，而不是特别严格的，我没有严格的按照js的算法去写，另外请求这个接口的时候需要带有 登陆后的cookie

其他
我也写了微信扫码登陆自动保存cookie的脚本，还要获取所有文章url的脚本，我打包成压缩包了，有需要的可以下载
源码
你要使用的话需要先登陆，login_csdn_qrcode.py 为登陆脚本，get_article_detail.py 为下载markdown脚本

本文来自博客园，作者：Hello_wshuo，转载请注明原文链接：https://www.cnblogs.com/Hellowshuo/p/15622154.html
```

```
从零构建CSDN质量分批量查询工具：Java实战与API逆向解析
原创
于 2026-01-29 14:58:33 发布
·
166 阅读
·

2
·
 3
·
CC 4.0 BY-SA版权
文章标签：
#CSDN
#质量分
#Java开发
#API逆向

CSDN质量分批量查询工具：Java实战与逆向工程全解析
在技术内容创作领域，CSDN作为国内领先的开发者社区，其质量分体系直接影响着创作者的认证等级和内容曝光。本文将深入探讨如何通过Java技术栈构建一个高效的CSDN质量分批量查询工具，从接口逆向分析到完整项目实现，为开发者提供一套可落地的解决方案。

1. 质量分体系解析与查询需求
CSDN质量分是评估技术文章专业性的核心指标，由标题清晰度、代码规范性、结构完整性等多维度构成。根据官方规则，质量分直接影响以下场景：

创作者认证：优质创作者（≥80分）与新星创作者（≥70分）的准入门槛
内容推荐：高分文章获得更多流量倾斜
账号权重：影响搜索排名和粉丝增长速率
传统手动查询方式存在明显痛点：

单篇文章需逐个URL提交查询
无法获取历史文章的全量数据统计
缺乏趋势分析和薄弱环节诊断
2. 接口逆向工程实战
2.1 核心接口分析
通过浏览器开发者工具抓包，我们发现质量分查询涉及两个关键接口：

GET https://blog.csdn.net/community/home-api/v1/get-business-list
参数：
  page=1
  size=20
  businessType=blog
  username={你的CSDN ID}

POST https://bizapi.csdn.net/trends/api/v1/get-article-score
Headers:
  x-ca-key: 203930474
  x-ca-nonce: [动态UUID]
  x-ca-signature: [HMAC签名]
Body:
  url=[文章URL]
AI写代码
http

2.2 签名算法破解
关键签名x-ca-signature的生成逻辑经逆向分析如下：

public String generateSignature(String secret, String nonce) {
    String message = "x-ca-key:" + secret + "\n" 
                   + "x-ca-nonce:" + nonce;
    Mac hmac = Mac.getInstance("HmacSHA256");
    hmac.init(new SecretKeySpec(secret.getBytes(), "HmacSHA256"));
    byte[] signature = hmac.doFinal(message.getBytes());
    return Base64.getEncoder().encodeToString(signature);
}
AI写代码
java
运行
注意：实际开发中应动态获取secret值，本文示例代码中的203930474为演示用固定值

3. Java实现方案
3.1 项目结构设计
src/
├── main/
│   ├── java/
│   │   ├── model/
│   │   │   └── ArticleScore.java
│   │   ├── service/
│   │   │   ├── CsdnService.java
│   │   │   └── SignatureService.java
│   │   └── CsdnQueryApplication.java
│   └── resources/
│       └── application.properties
└── test/
AI写代码

3.2 核心代码实现
HTTP请求工具类：

public class HttpUtil {
    private static final RestTemplate restTemplate = new RestTemplate();
    
    public static JSONObject getWithHeaders(String url, HttpHeaders headers) {
        HttpEntity<String> entity = new HttpEntity<>(headers);
        ResponseEntity<String> response = restTemplate.exchange(
            url, HttpMethod.GET, entity, String.class);
        return JSON.parseObject(response.getBody());
    }
    
    public static JSONObject postFormData(String url, 
                                        MultiValueMap<String, String> body,
                                        HttpHeaders headers) {
        headers.setContentType(MediaType.MULTIPART_FORM_DATA);
        HttpEntity<MultiValueMap<String, String>> entity = new HttpEntity<>(body, headers);
        return restTemplate.postForObject(url, entity, JSONObject.class);
    }
}
AI写代码
java
运行

质量分批量查询逻辑：

public List<ArticleScore> batchQueryScores(String username, int pageSize) {
    List<ArticleScore> results = new ArrayList<>();
    int page = 1;
    
    while(true) {
        String listUrl = String.format(
            "https://blog.csdn.net/community/home-api/v1/get-business-list?"
            + "page=%d&size=%d&businessType=blog&username=%s",
            page, pageSize, username);
            
        JSONObject listData = HttpUtil.getWithHeaders(listUrl, new HttpHeaders());
        JSONArray articles = listData.getJSONObject("data").getJSONArray("list");
        
        if(articles.isEmpty()) break;
        
        for(int i=0; i<articles.size(); i++) {
            JSONObject article = articles.getJSONObject(i);
            String url = article.getString("url");
            ArticleScore score = querySingleScore(url);
            results.add(score);
            
            // 防止触发频率限制
            Thread.sleep(1000); 
        }
        
        page++;
    }
    
    return results;
}
AI写代码
java
运行

3.3 性能优化策略
并发控制：采用线程池实现可控并发

ExecutorService executor = Executors.newFixedThreadPool(5);
List<Future<ArticleScore>> futures = articles.stream()
    .map(article -> executor.submit(() -> 
        querySingleScore(article.getString("url"))))
    .collect(Collectors.toList());
AI写代码
java
运行
缓存机制：使用Redis缓存已查询结果

@Cacheable(value = "articleScores", key = "#url")
public ArticleScore querySingleScore(String url) {
    // 查询逻辑
}
AI写代码
java
运行
失败重试：实现指数退避重试策略

public ArticleScore queryWithRetry(String url, int maxRetries) {
    int retry = 0;
    while(retry < maxRetries) {
        try {
            return querySingleScore(url);
        } catch (Exception e) {
            long waitTime = (long) Math.pow(2, retry) * 1000;
            Thread.sleep(waitTime);
            retry++;
        }
    }
    throw new RuntimeException("Max retries exceeded");
}
AI写代码
java
运行

4. 数据分析与可视化
4.1 关键指标计算
指标名称	计算公式	分析意义
平均质量分	∑分数/文章总数	整体内容质量水平
优质文章占比	分数≥80的文章数/总文章数×100%	认证达标可能性
分数标准差	√[∑(分数-均值)²/N]	内容质量稳定性
月度趋势	按月份分组计算平均分	质量改进效果评估
4.2 可视化方案
使用ECharts生成交互式报表：

// 分数分布直方图
option = {
    xAxis: { type: 'category', data: ['60-69', '70-79', '80-89', '90-100'] },
    yAxis: { type: 'value' },
    series: [{
        data: [12, 35, 28, 15],
        type: 'bar'
    }]
};
AI写代码
javascript
运行
5. 项目扩展方向
Chrome插件开发：集成到浏览器实现一键查询

{
  "name": "CSDN质量分助手",
  "version": "1.0",
  "permissions": ["https://*.csdn.net/"],
  "background": {
    "scripts": ["background.js"],
    "persistent": false
  }
}
AI写代码
manifest.json
微信小程序版：方便移动端使用

<view class="container">
  <input placeholder="输入CSDN ID" bindinput="onInput"/>
  <button bindtap="onQuery">查询质量分</button>
  <canvas canvas-id="chart"/>
</view>
AI写代码
xml
自动化监控系统：定时检测质量变化

# 定时任务配置
@scheduled(cron="0 0 18 * * ?")
def daily_check():
    scores = csdn_service.query_scores(user_id)
    alert_if_low(scores)
AI写代码
python
运行
在实际项目中，建议将签名算法部分封装为独立服务，并定期检查接口变更。我曾遇到CSDN接口版本升级导致签名规则变化的情况，通过建立接口监控机制及时发现了异常。对于高频查询需求，可以考虑使用代理IP池来避免封禁风险。
————————————————
版权声明：本文为CSDN博主「奶茶余香」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/weixin_29284885/article/details/157523871
```


